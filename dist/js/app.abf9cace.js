(function(){"use strict";var e={8725:function(e,t,a){var s=a(8935),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.hasPlayers?a("BalanceList",{attrs:{players:e.players}}):e._e(),e.hasPlayers?a("AppLog",{attrs:{appEvents:e.appEvents}}):e._e(),a("main",{staticClass:"base"},[a("h1",{staticClass:"base__title"},[e._v("Монополия")]),a("div",{staticClass:"base__players"},[a("p",{staticClass:"base__notification",class:{"base__notification-hide":e.hasPlayers}},[e._v(" "+e._s(e.defaultNotification)+" ")]),a("div",{staticClass:"base__wrapper"},[a("div",{staticClass:"base__btn-wrapper"},[a("AddPlayersBtn",{staticClass:"base__add-players-btn",on:{"get-new-player":e.addNewPlayer}})],1),e.hasPlayers?a("div",{staticClass:"base__cards"},e._l(e.players,(function(t,s){return a("PlayerCard",{key:s,attrs:{name:t.name,balance:t.balance,isActive:t.isActive}},[a("BalanceOperations",{attrs:{currentIndex:s,players:e.players},on:{"increase-balance":e.increaseBalance,"decrease-balance":e.decreaseBalance}}),a("MoneySending",{attrs:{players:e.players,currentIndex:s},on:{"send-sum":e.sendSumToOtherPlayer}})],1)})),1):e._e()])])])],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"add-players-btn",on:{click:e.getNewPlayer}},[e._v("Добавить игрока")])},l=[],c={data(){return{player:{name:"",balance:15e6,isActive:!0}}},methods:{getNewPlayer(){while(!this.player.name)this.player.name=prompt("Ведите имя игрока");this.$emit("get-new-player",this.player.name,this.player.balance,this.player.isActive),this.player.name=""}}},o=c,p=a(1001),u=(0,p.Z)(o,r,l,!1,null,"5eaf2a20",null),d=u.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"player-card",class:{inactive:!e.isActive}},[a("h3",{staticClass:"player-card__name"},[e._v(e._s(e.name))]),a("div",{staticClass:"player-card__balance balance"},[a("span",{staticClass:"balance__title"},[e._v("Баланс игрока(монет):")]),e._v(" "+e._s(e.formatBalance)+" ")]),e._t("default")],2)},_=[],v={components:{},props:{name:String,balance:Number,isActive:Boolean},methods:{},computed:{formatBalance(){let e=this.balance+"",t=e.split("").reverse(),a=[];for(let s=0;s<t.length;s++)s%3===0?a.push(t[s]+" "):a.push(t[s]);return a.reverse().join("")}}},m=v,y=(0,p.Z)(m,h,_,!1,null,"fab8e948",null),f=y.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"balance-operations"},[a("div",{staticClass:"balance-operations__in balance-operation"},[e._m(0),a("div",{staticClass:"balance-operation__main"},[a("span",[e._v("Сумма(тыс. монет): ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.balanceIn,expression:"balanceIn"}],staticClass:"balance-operation__input",attrs:{type:"text",disabled:!e.players[e.currentIndex].isActive},domProps:{value:e.balanceIn},on:{input:function(t){t.target.composing||(e.balanceIn=t.target.value)}}}),a("button",{staticClass:"balance-operation__btn",on:{click:e.increaseBalance}},[e._v(" > ")])])]),a("div",{staticClass:"balance-operations__out balance-operation"},[e._m(1),a("div",{staticClass:"balance-operation__main"},[a("span",[e._v("Сумма(тыс. монет): ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.balanceOut,expression:"balanceOut"}],staticClass:"balance-operation__input",attrs:{type:"text",disabled:!e.players[e.currentIndex].isActive},domProps:{value:e.balanceOut},on:{input:function(t){t.target.composing||(e.balanceOut=t.target.value)}}}),a("button",{staticClass:"balance-operation__btn",on:{click:e.decreaseBalance}},[e._v(" > ")])])])])},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"balance-operation__title"},[a("strong",[e._v("Приход")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"balance-operation__title"},[a("strong",[e._v("Расход")])])}],C={props:{currentIndex:Number,players:Array},data(){return{balanceIn:"",balanceOut:""}},methods:{increaseBalance(){this.$emit("increase-balance",1e3*this.balanceIn,this.currentIndex),this.balanceIn=""},decreaseBalance(){this.$emit("decrease-balance",1e3*this.balanceOut,this.currentIndex),this.balanceOut=""}}},w=C,x=(0,p.Z)(w,b,g,!1,null,"61ec594c",null),S=x.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"money-sending"},[a("h4",{staticClass:"money-sending__title"},[e._v("Отправить деньги")]),a("div",{staticClass:"money-sending__main"},[a("div",{staticClass:"money-sending__recipient"},[a("div",[e._v("Игроку:")]),a("form",{staticClass:"money-sending__choice choice"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.recepient,expression:"recepient"}],staticClass:"choice__slct",attrs:{disabled:!e.players[e.currentIndex].isActive},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.recepient=t.target.multiple?a:a[0]},e.getPlayerIndex]}},e._l(e.players,(function(t,s){return a("option",{key:s,attrs:{disabled:!e.players[s].isActive||s===e.currentIndex},domProps:{value:s}},[e._v(" "+e._s(t.name)+" ")])})),0)])]),a("div",{staticClass:"money-sending__sum sending"},[a("span",[e._v("Сумма(тыс. монет): ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.sendingSum,expression:"sendingSum"}],staticClass:"sending__inp",attrs:{type:"text",disabled:!e.players[e.currentIndex].isActive},domProps:{value:e.sendingSum},on:{input:function(t){t.target.composing||(e.sendingSum=t.target.value)}}}),a("button",{staticClass:"sending__btn",attrs:{disabled:!e.players[e.currentIndex].isActive},on:{click:e.sendSumToOtherPlayer}},[e._v(" Отправить ")])])])])},O=[],A={props:{players:Array,currentIndex:Number},data(){return{sendingSum:"",recepient:0}},methods:{sendSumToOtherPlayer(){console.log(this.recepient),this.$emit("send-sum",1e3*this.sendingSum,this.currentIndex,this.recepient)},getPlayerIndex(e){this.recepient=e.target.selectedIndex,console.log(this.recepient)}},computed:{}},I=A,E=(0,p.Z)(I,$,O,!1,null,"7a8fcbbf",null),P=E.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{staticClass:"balance-list",class:{hide:e.hide}},[a("div",{staticClass:"balance-list__header"},[a("h3",{staticClass:"balance-list__title"},[e._v("Текущий баланс игроков:")]),a("span",{staticClass:"balance-list__btn",on:{click:e.hideList}},[e._v(e._s(e.hideShow))])]),a("div",{staticClass:"balance-list__main"},[a("div",{staticClass:"balance-list__player-name lists"},[e._m(0),a("ul",{staticClass:"lists__list"},e._l(e.players,(function(t,s){return a("li",{key:s,staticClass:"lists__item",class:{inactive:!t.isActive}},[e._v(" "+e._s(t.name)+" ")])})),0)]),a("div",{staticClass:"balance-list__player__balance lists"},[e._m(1),a("ul",{staticClass:"lists__list"},e._l(e.players,(function(t,s){return a("li",{key:s,staticClass:"balance-list__item",class:{inactive:!t.isActive}},[e._v(" "+e._s(e.formatBalance(t.balance))+" ")])})),0)])])])},N=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lists__title"},[a("strong",[e._v("Имя игрока")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lists__title"},[a("strong",[e._v("Баланс игрока(монет)")])])}],T={props:{players:Array},data(){return{hide:!1,hideShow:"Свернуть"}},methods:{formatBalance(e){let t=e+"",a=t.split("").reverse(),s=[];for(let n=0;n<a.length;n++)n%3===0?s.push(a[n]+" "):s.push(a[n]);return s.reverse().join("")},hideList(){this.hide?(this.hide=!1,this.hideShow="Свернуть"):(this.hide=!0,setTimeout((()=>{this.hideShow="Развернуть"}),300))}}},k=T,L=(0,p.Z)(k,B,N,!1,null,"7f01ad8b",null),j=L.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-log",class:{hide:e.hide}},[a("div",{staticClass:"app-log__header"},[a("h3",{staticClass:"app-log__title"},[e._v("Лог событий:")]),a("span",{staticClass:"app-log__btn",on:{click:e.hideList}},[e._v(e._s(e.hideShow))])]),a("ul",{staticClass:"app-log__list"},e._l(e.appEvents,(function(t,s){return a("li",{key:s},[e._v(" "+e._s(e.getLogText(t))+" ")])})),0)])},Z=[],F={props:{appEvents:Array},data(){return{hide:!1,hideShow:"Свернуть"}},methods:{getLogText(e){switch(+e.eventType){case 0:return`${e.eventTime} Добавлен новый игрок ${e.playerFirst}`;case 1:return`${e.eventTime} Игрок ${e.playerFirst} получил ${this.formatBalance(e.sumIn)} монет`;case 2:return`${e.eventTime} Игрок ${e.playerFirst} потерял ${this.formatBalance(e.sumOut)} монет`;case 3:return`${e.eventTime} Игрок ${e.playerFirst} перевел игроку ${e.playerSecond} ${this.formatBalance(e.sumOut)} монет`;case 4:return`${e.eventTime} Игрок ${e.playerFirst} выбыл из игры`}},formatBalance(e){let t=e+"",a=t.split("").reverse(),s=[];for(let n=0;n<a.length;n++)n%3===0?s.push(a[n]+" "):s.push(a[n]);return s.reverse().join("")},hideList(){this.hide?(this.hide=!1,this.hideShow="Свернуть"):(this.hide=!0,setTimeout((()=>{this.hideShow="Развернуть"}),300))}}},D=F,J=(0,p.Z)(D,M,Z,!1,null,"7d109feb",null),H=J.exports,Y={name:"App",components:{AddPlayersBtn:d,PlayerCard:f,BalanceOperations:S,MoneySending:P,BalanceList:j,AppLog:H},data(){return{hasPlayers:!1,defaultNotification:"Список игроков пуст. Добавьте первого игрока.",players:[],appEvents:[]}},mounted(){localStorage.length&&(confirm("Вы желаете продолжить игру?")?(this.hasPlayers=!0,this.players=JSON.parse(localStorage.getItem("players")),this.appEvents=JSON.parse(localStorage.getItem("appEvents")),console.log(this.players)):localStorage.clear())},methods:{addNewPlayer(e,t,a){const s={name:e,balance:t,isActive:a};this.players.push(s),this.hasPlayers=!0,this.addNewEvent(0,0,0,e)},addNewEvent(...e){const t=new Date,a={eventTime:this.formatDate(t),eventType:e[0],sumIn:e[1],sumOut:e[2],playerFirst:e[3],playerSecond:e[4]};this.appEvents.push(a);let s=JSON.stringify(this.players),n=JSON.stringify(this.appEvents);localStorage.setItem("players",s),localStorage.setItem("appEvents",n)},increaseBalance(e,t){this.players[t].balance+=+e,this.addNewEvent(1,e,0,this.players[t].name)},decreaseBalance(e,t){this.players[t].balance-=+e,this.checkActivity(t),this.addNewEvent(2,0,e,this.players[t].name)},sendSumToOtherPlayer(e,t,a){this.players[t].balance-=+e,this.players[a].balance+=+e,console.log(t),console.log(a),this.checkActivity(t),this.addNewEvent(3,0,e,this.players[t].name,this.players[a].name)},checkActivity(e){this.players[e].balance<-5e6&&(this.players[e].isActive=!1,setTimeout((()=>{this.addNewEvent(4,0,0,this.players[e].name)}),1))},formatDate(e){const t=e.getDate(),a=e.getMonth().length>1?e.getMonth():"0"+e.getMonth(),s=e.getFullYear(),n=e.getHours(),i=e.getMinutes().length>1?e.getMinutes():("0"+e.getMinutes()).slice(-2),r=e.getSeconds().length>1?e.getSeconds():("0"+e.getSeconds()).slice(-2);return`${t}.${a}.${s} ${n}:${i}:${r}`}}},q=Y,z=(0,p.Z)(q,n,i,!1,null,null,null),G=z.exports;s.Z.config.productionTip=!1,new s.Z({render:e=>e(G)}).$mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,i){if(!s){var r=1/0;for(p=0;p<e.length;p++){s=e[p][0],n=e[p][1],i=e[p][2];for(var l=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[c])}))?s.splice(c--,1):(l=!1,i<r&&(r=i));if(l){e.splice(p--,1);var o=n();void 0!==o&&(t=o)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[s,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,r=s[0],l=s[1],c=s[2],o=0;if(r.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(c)var p=c(a)}for(t&&t(s);o<r.length;o++)i=r[o],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(p)},s=self["webpackChunkmonopolia"]=self["webpackChunkmonopolia"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8725)}));s=a.O(s)})();
//# sourceMappingURL=app.abf9cace.js.map